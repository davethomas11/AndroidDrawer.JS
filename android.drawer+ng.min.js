(function(win,doc){function AndroidDrawer(userOpts){function createOverlay(){var overlay=doc.createElement("div");overlay.style.height="100%",overlay.style.width="100%",overlay.style["background-color"]="#000",overlay.style.opacity="0",overlay.style.position="absolute",overlay.style.display="none",overlay.style.top=0,overlay.style.left=0,utils.klass.add(overlay,"android-drawer-overlay"),settings.content.appendChild(overlay),cache.overlay=overlay}function destroyOverlay(){cache.overlay&&(cache.overlay.parentNode.removeChild(cache.overlay),cache.overlay=null)}var settings={drawer:null,content:null,disable:"none",addBodyClasses:!0,hyperextensible:!1,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:266,minPosition:-266,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5,overlay:!0,overlayOpacity:.55},cache={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},eventList={},action={translate:{get:{matrix:function(index){if(utils.canTransform()){var matrix=win.getComputedStyle(settings.drawer)[cache.vendor+"Transform"].match(/\((.*)\)/),ieOffset=8;return matrix?(matrix=matrix[1].split(","),16===matrix.length&&(index+=ieOffset),parseInt(matrix[index],10)):0}return parseInt(settings.drawer.style.left,10)}},easeCallback:function(){settings.drawer.style[cache.vendor+"Transition"]="",cache.translation=action.translate.get.matrix(4),cache.easing=!1,clearInterval(cache.animatingInterval),0===cache.easingTo&&(utils.klass.remove(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left"),cache.overlay&&(cache.overlay.style.display="none")),utils.dispatchEvent("animated"),utils.events.removeEvent(settings.drawer,utils.transitionCallback(),action.translate.easeCallback)},easeTo:function(n){utils.canTransform()?(cache.easing=!0,cache.easingTo=n,settings.drawer.style[cache.vendor+"Transition"]="all "+settings.transitionSpeed+"s "+settings.easing,cache.overlay&&(cache.overlay.style[cache.vendor+"Transition"]="all "+settings.transitionSpeed+"s "+settings.easing),cache.animatingInterval=setInterval(function(){utils.dispatchEvent("animating")},1),utils.events.addEvent(settings.drawer,utils.transitionCallback(),action.translate.easeCallback),action.translate.x(n)):(cache.translation=n,action.translate.x(n)),0===n&&(settings.drawer.style[cache.vendor+"Transform"]="")},x:function(n){if(!("left"===settings.disable&&n>0||"right"===settings.disable&&0>n)){if(settings.hyperextensible||(n===settings.maxPosition||n>settings.maxPosition?n=settings.maxPosition:(n===settings.minPosition||n<settings.minPosition)&&(n=settings.minPosition)),n=parseInt(n,10),isNaN(n)&&(n=0),utils.canTransform()){var theTranslate="translate3d("+n+"px, 0,0)";settings.drawer.style[cache.vendor+"Transform"]=theTranslate}else settings.drawer.style.width=(win.innerWidth||doc.documentElement.clientWidth)+"px",settings.drawer.style.left=n+"px",settings.drawer.style.right="";0===n?cache.overlay&&(cache.overlay.style.opacity=0):cache.overlay&&(cache.overlay.style.opacity=settings.overlayOpacity*(n/settings.maxPosition),cache.overlay.style.display="block")}}},drag:{listen:function(){cache.translation=0,cache.easing=!1,utils.events.addEvent(settings.drawer,utils.eventType("down"),action.drag.startDrag),utils.events.addEvent(settings.drawer,utils.eventType("move"),action.drag.dragging),utils.events.addEvent(settings.drawer,utils.eventType("up"),action.drag.endDrag),utils.events.addEvent(settings.content,utils.eventType("down"),action.drag.startDrag),utils.events.addEvent(settings.content,utils.eventType("move"),action.drag.dragging),utils.events.addEvent(settings.content,utils.eventType("up"),action.drag.endDrag),cache.overlay&&(utils.events.addEvent(cache.overlay,utils.eventType("down"),action.drag.startDrag),utils.events.addEvent(cache.overlay,utils.eventType("move"),action.drag.dragging),utils.events.addEvent(cache.overlay,utils.eventType("up"),action.drag.endDrag)),cache.listening=!0},stopListening:function(){utils.events.removeEvent(settings.drawer,utils.eventType("down"),action.drag.startDrag),utils.events.removeEvent(settings.drawer,utils.eventType("move"),action.drag.dragging),utils.events.removeEvent(settings.drawer,utils.eventType("up"),action.drag.endDrag),utils.events.removeEvent(settings.content,utils.eventType("down"),action.drag.startDrag),utils.events.removeEvent(settings.content,utils.eventType("move"),action.drag.dragging),utils.events.removeEvent(settings.content,utils.eventType("up"),action.drag.endDrag),cache.overlay&&(utils.events.removeEvent(cache.overlay,utils.eventType("down"),action.drag.startDrag),utils.events.removeEvent(cache.overlay,utils.eventType("move"),action.drag.dragging),utils.events.removeEvent(cache.overlay,utils.eventType("up"),action.drag.endDrag)),cache.listening=!1},startDrag:function(e){e.target?e.target:e.srcElement;utils.dispatchEvent("start"),settings.drawer.style[cache.vendor+"Transition"]="",cache.isDragging=!0,cache.hasIntent=null,cache.intentChecked=!1,cache.startDragX=utils.page("X",e),cache.startDragY=utils.page("Y",e),cache.dragWatchers={current:0,last:0,hold:0,state:""},cache.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(e){if(cache.isDragging&&settings.touchToDrag){var diff,thePageX=utils.page("X",e),thePageY=utils.page("Y",e),translated=cache.translation,absoluteTranslation=action.translate.get.matrix(4),whileDragX=thePageX-cache.startDragX,openingLeft=absoluteTranslation>0,translateTo=whileDragX;if(cache.intentChecked&&!cache.hasIntent)return;if(settings.addBodyClasses&&(absoluteTranslation>0?(utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right")):0>absoluteTranslation&&(utils.klass.add(doc.body,"snapjs-right"),utils.klass.remove(doc.body,"snapjs-left"))),cache.hasIntent===!1||null===cache.hasIntent){var deg=utils.angleOfDrag(thePageX,thePageY),inRightRange=deg>=0&&deg<=settings.slideIntent||360>=deg&&deg>360-settings.slideIntent,inLeftRange=deg>=180&&deg<=180+settings.slideIntent||180>=deg&&deg>=180-settings.slideIntent;inLeftRange||inRightRange?cache.hasIntent=!0:cache.hasIntent=!1,cache.intentChecked=!0}if(settings.minDragDistance>=Math.abs(thePageX-cache.startDragX)||cache.hasIntent===!1)return;utils.events.prevent(e),utils.dispatchEvent("drag"),cache.dragWatchers.current=thePageX,cache.dragWatchers.last>thePageX?("left"!==cache.dragWatchers.state&&(cache.dragWatchers.state="left",cache.dragWatchers.hold=thePageX),cache.dragWatchers.last=thePageX):cache.dragWatchers.last<thePageX&&("right"!==cache.dragWatchers.state&&(cache.dragWatchers.state="right",cache.dragWatchers.hold=thePageX),cache.dragWatchers.last=thePageX),openingLeft?(settings.maxPosition<absoluteTranslation&&(diff=(absoluteTranslation-settings.maxPosition)*settings.resistance,translateTo=whileDragX-diff),cache.simpleStates={opening:"left",towards:cache.dragWatchers.state,hyperExtending:settings.maxPosition<absoluteTranslation,halfway:absoluteTranslation>settings.maxPosition/2,flick:Math.abs(cache.dragWatchers.current-cache.dragWatchers.hold)>settings.flickThreshold,translation:{absolute:absoluteTranslation,relative:whileDragX,sinceDirectionChange:cache.dragWatchers.current-cache.dragWatchers.hold,percentage:absoluteTranslation/settings.maxPosition*100}}):(settings.minPosition>absoluteTranslation&&(diff=(absoluteTranslation-settings.minPosition)*settings.resistance,translateTo=whileDragX-diff),cache.simpleStates={opening:"right",towards:cache.dragWatchers.state,hyperExtending:settings.minPosition>absoluteTranslation,halfway:absoluteTranslation<settings.minPosition/2,flick:Math.abs(cache.dragWatchers.current-cache.dragWatchers.hold)>settings.flickThreshold,translation:{absolute:absoluteTranslation,relative:whileDragX,sinceDirectionChange:cache.dragWatchers.current-cache.dragWatchers.hold,percentage:absoluteTranslation/settings.minPosition*100}}),action.translate.x(translateTo+translated)}},endDrag:function(e){if(cache.isDragging){utils.dispatchEvent("end");var translated=action.translate.get.matrix(4);if(0===cache.dragWatchers.current&&0!==translated&&settings.tapToClose&&e.target!==settings.drawer)return utils.dispatchEvent("close"),utils.events.prevent(e),action.translate.easeTo(0),cache.isDragging=!1,void(cache.startDragX=0);"left"===cache.simpleStates.opening?cache.simpleStates.halfway||cache.simpleStates.hyperExtending||cache.simpleStates.flick?cache.simpleStates.flick&&"left"===cache.simpleStates.towards?action.translate.easeTo(0):(cache.simpleStates.flick&&"right"===cache.simpleStates.towards||cache.simpleStates.halfway||cache.simpleStates.hyperExtending)&&action.translate.easeTo(settings.maxPosition):action.translate.easeTo(0):"right"===cache.simpleStates.opening&&(cache.simpleStates.halfway||cache.simpleStates.hyperExtending||cache.simpleStates.flick?cache.simpleStates.flick&&"right"===cache.simpleStates.towards?action.translate.easeTo(0):(cache.simpleStates.flick&&"left"===cache.simpleStates.towards||cache.simpleStates.halfway||cache.simpleStates.hyperExtending)&&action.translate.easeTo(settings.minPosition):action.translate.easeTo(0)),cache.isDragging=!1,cache.startDragX=utils.page("X",e)}}}},utils={hasTouch:"ontouchstart"in doc.documentElement||win.navigator.msPointerEnabled,eventType:function(action){var eventTypes={down:utils.hasTouch?"touchstart":"mousedown",move:utils.hasTouch?"touchmove":"mousemove",up:utils.hasTouch?"touchend":"mouseup",out:utils.hasTouch?"touchcancel":"mouseout"};return eventTypes[action]},page:function(t,e){return utils.hasTouch&&e.touches.length&&e.touches[0]?e.touches[0]["page"+t]:e["page"+t]},klass:{has:function(el,name){return-1!==el.className.indexOf(name)},add:function(el,name){!utils.klass.has(el,name)&&settings.addBodyClasses&&(el.className+=" "+name)},remove:function(el,name){settings.addBodyClasses&&(el.className=el.className.replace(name,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(type){return"function"==typeof eventList[type]?eventList[type].call():void 0},vendor:function(){var i,tmp=doc.createElement("div"),prefixes="webkit Moz O ms".split(" ");for(i in prefixes)if("undefined"!=typeof tmp.style[prefixes[i]+"Transition"])return prefixes[i]},transitionCallback:function(){return"Moz"===cache.vendor||"ms"===cache.vendor?"transitionend":cache.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof settings.drawer.style[cache.vendor+"Transform"]},deepExtend:function(destination,source){var property;for(property in source)source[property]&&source[property].constructor&&source[property].constructor===Object?(destination[property]=destination[property]||{},utils.deepExtend(destination[property],source[property])):destination[property]=source[property];return destination},angleOfDrag:function(x,y){var degrees,theta;return theta=Math.atan2(-(cache.startDragY-y),cache.startDragX-x),0>theta&&(theta+=2*Math.PI),degrees=Math.floor(theta*(180/Math.PI)-180),0>degrees&&degrees>-180&&(degrees=360-Math.abs(degrees)),Math.abs(degrees)},events:{addEvent:function(element,eventName,func){return element.addEventListener?element.addEventListener(eventName,func,!1):element.attachEvent?element.attachEvent("on"+eventName,func):void 0},removeEvent:function(element,eventName,func){return element.addEventListener?element.removeEventListener(eventName,func,!1):element.attachEvent?element.detachEvent("on"+eventName,func):void 0},prevent:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}}},init=function(opts){opts.drawer&&(utils.deepExtend(settings,opts),cache.vendor=utils.vendor(),settings.overlay&&createOverlay(),settings.drawer&&(settings.maxPosition=settings.drawer.getBoundingClientRect().width,action.drag.listen()))};this.open=function(side){utils.dispatchEvent("open"),utils.klass.remove(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right"),side||(side="left"),"left"===side?(cache.simpleStates.opening="left",cache.simpleStates.towards="right",utils.klass.add(doc.body,"snapjs-left"),utils.klass.remove(doc.body,"snapjs-right"),action.translate.easeTo(settings.maxPosition)):"right"===side&&(cache.simpleStates.opening="right",cache.simpleStates.towards="left",utils.klass.remove(doc.body,"snapjs-left"),utils.klass.add(doc.body,"snapjs-right"),action.translate.easeTo(settings.minPosition))},this.close=function(){utils.dispatchEvent("close"),action.translate.easeTo(0)},this.expand=function(side){var to=win.innerWidth||doc.documentElement.clientWidth;"left"===side?(utils.dispatchEvent("expandLeft"),utils.klass.add(doc.body,"snapjs-expand-left"),utils.klass.remove(doc.body,"snapjs-expand-right")):(utils.dispatchEvent("expandRight"),utils.klass.add(doc.body,"snapjs-expand-right"),utils.klass.remove(doc.body,"snapjs-expand-left"),to*=-1),action.translate.easeTo(to)},this.on=function(evt,fn){return eventList[evt]=fn,this},this.off=function(evt){eventList[evt]&&(eventList[evt]=!1)},this.enable=function(){utils.dispatchEvent("enable"),action.drag.listen()},this.disable=function(){utils.dispatchEvent("disable"),action.drag.stopListening()},this.settings=function(opts){utils.deepExtend(settings,opts),settings.drawer&&(settings.maxPosition=settings.drawer.getBoundingClientRect().width,cache.listening&&action.drag.stopListening(),action.drag.listen()),settings.overlay?createOverlay():destroyOverlay()},this.state=function(){var state,fromLeft=action.translate.get.matrix(4);return state=fromLeft===settings.maxPosition?"left":fromLeft===settings.minPosition?"right":"closed",{state:state,info:cache.simpleStates}},init(userOpts)}"undefined"!=typeof module&&module.exports&&(module.exports=AndroidDrawer),"undefined"==typeof ender&&(this.AndroidDrawer=AndroidDrawer),"function"==typeof define&&define.amd&&define("androidDrawer",[],function(){return AndroidDrawer})}).call(this,window,document),angular.module("snap",[]),function(){"use strict";var version=[1,8,5],vObj={full:version.join("."),major:version[0],minor:version[1],patch:version[2]};angular.module("snap").constant("SNAP_VERSION",vObj)}(),angular.module("snap").directive("snapClose",["$rootScope","snapRemote",function($rootScope,snapRemote){"use strict";return{restrict:"A",link:function(scope,element,attrs){element.bind("click",function(){snapRemote.close(scope.$eval(attrs.snapId)),$rootScope.$digest()})}}}]),angular.module("snap").directive("snapContent",["SnapConstructor","snapRemote",function(SnapConstructor,snapRemote){"use strict";return{restrict:"AE",link:function(scope,element,attrs){element.addClass("snap-content");var snapId=attrs.snapId;snapId&&(snapId=scope.$eval(attrs.snapId));var snapOptions=angular.extend({},snapRemote.globalOptions),watchAttr=function(val,attr){scope.$watch(function(){return scope.$eval(val)},function(newVal,oldVal){angular.isDefined(oldVal)&&newVal!==oldVal&&snapRemote.getSnapper(snapId).then(function(snapper){var settingsUpdate={};settingsUpdate[attr]=newVal,snapper.settings(settingsUpdate)})})};angular.forEach(attrs,function(val,attr){0===attr.indexOf("snapOpt")&&(attr=attr.substring(7),attr.length&&(attr=attr[0].toLowerCase()+attr.substring(1),snapOptions[attr]=scope.$eval(val),watchAttr(val,attr)))}),snapOptions.content=element[0],angular.isDefined(attrs.snapOptions)&&attrs.snapOptions&&angular.extend(snapOptions,scope.$eval(attrs.snapOptions)),snapRemote.register(new SnapConstructor(snapOptions),snapId),angular.isDefined(attrs.snapOptions)&&attrs.snapOptions&&scope.$watch(attrs.snapOptions,function(newSnapOptions){snapRemote.getSnapper(snapId).then(function(snapper){snapper.settings(newSnapOptions)})},!0),scope.$on("$destroy",function(){snapRemote.unregister(snapId)})}}}]),angular.module("snap").directive("snapDrawer",["snapRemote"],function(snapRemote){"use strict";return{restrict:"AE",link:function(scope,element,attrs){element.addClass("snap-drawer");element.parent();"right"===attrs.snapDrawer?element.addClass("snap-drawer-right"):element.addClass("snap-drawer-left"),snapRemote.settings({drawer:element[0]})}}}),angular.module("snap").directive("snapToggle",["$rootScope","snapRemote",function($rootScope,snapRemote){"use strict";return{restrict:"A",link:function(scope,element,attrs){var snapId=attrs.snapId,snapSide=attrs.snapToggle||"left";if(snapId&&(snapId=scope.$eval(snapId)),!attrs.snapUnsafe){var downOnMe=!1;element.bind("mousedown",function(event){downOnMe=!0,event.stopImmediatePropagation()}),element.bind("mouseup",function(event){downOnMe&&event.stopImmediatePropagation(),downOnMe=!1})}element.bind("click",function(){snapRemote.toggle(snapSide,snapId),$rootScope.$digest()})}}}]),angular.module("snap").provider("SnapConstructor",function(){"use strict";var constructor;this.use=function(MySnap){constructor=MySnap},this.$get=["$window",function($window){var S=constructor||$window.Snap;if(angular.isUndefined(S))throw new Error("Snap constructor is not defined. Make sure window.Snap is defined or supply your own with SnapConstructorProvider.use(MySnap).");return S}]}),angular.module("snap").provider("snapRemote",function(){"use strict";var self=this;return this.globalOptions={},this.$get=["$q",function($q){var initStoreForId,resolveInStoreById,snapperStore={},DEFAULT_SNAPPER_ID="__DEFAULT_SNAPPER_ID__",exports={};return exports.globalOptions=self.globalOptions,exports.getSnapper=function(id){return id=id||DEFAULT_SNAPPER_ID,snapperStore.hasOwnProperty(id)||initStoreForId(id),snapperStore[id].deferred.promise},exports.register=function(snapper,id){id=id||DEFAULT_SNAPPER_ID,snapperStore.pendingSettings&&(snapper.settings(snapperStore.pendingSettings),snapperStore.pendingSettings=null),snapperStore.hasOwnProperty(id)||initStoreForId(id),snapperStore[id].isResolved&&initStoreForId(id),resolveInStoreById(snapper,id)},exports.unregister=function(id){id=id||DEFAULT_SNAPPER_ID,snapperStore.hasOwnProperty(id)&&delete snapperStore[id]},exports.isregistered=function(id){return id=id||DEFAULT_SNAPPER_ID,snapperStore.hasOwnProperty(id)},exports.settings=function(opts,id){id=id||DEFAULT_SNAPPER_ID,exports.isregistered(id)?exports.getSnapper(id).then(function(snapper){snapper.settings(opts)}):snapperStore.pendingSettings=opts},exports.toggle=function(side,id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){side===snapper.state().state?exports.close(id):exports.open(side,id)})},exports.open=function(side,id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){snapper.open(side)})},exports.close=function(id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){snapper.close()})},exports.expand=function(side,id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){snapper.expand(side)})},exports.enable=function(id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){snapper.enable()})},exports.disable=function(id){id=id||DEFAULT_SNAPPER_ID,exports.getSnapper(id).then(function(snapper){snapper.disable()})},initStoreForId=function(id){snapperStore[id]={deferred:$q.defer(),isResolved:!1}},resolveInStoreById=function(snapper,id){snapperStore[id].deferred.resolve(snapper),snapperStore[id].isResolved=!0},exports}],this});